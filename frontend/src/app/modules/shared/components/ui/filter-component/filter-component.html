<div class="show-filter-row">
  <div class="filter-item filter-search">
    <p-floatlabel variant="on">
      <input
        pInputText
        id="searchInput"
        class="w-full"
        type="text"
        [ngModel]="searchTerm()"
        (ngModelChange)="searchTerm.set($event)"
      />
      <label for="searchInput">
        {{ translationService.translate("shared.filters.search") || "Szukaj" }}
      </label>
    </p-floatlabel>
  </div>
  <div class="filter-item filter-toggle">
    <p-button
      icon="pi pi-sliders-h"
      [label]="translationService.translate('shared.filters.showFilters')"
      size="small"
      (onClick)="toggleFilters()"
      [badge]="
        areFiltersApplied() ? activeFiltersCount().toString() : undefined
      "
    ></p-button>
    <p-button
      icon="pi pi-filter-slash"
      [label]="translationService.translate('shared.filters.clear')"
      severity="secondary"
      [outlined]="true"
      size="small"
      (onClick)="clearFilters()"
    ></p-button>
  </div>
</div>
<p-drawer [(visible)]="showFiltersDrawer" position="right" [title]="'Filters'">
  <h2>
    {{ translationService.translate("shared.filters.title") }}
  </h2>
  <div class="filter-wrapper">
    @if (showStatus() || showDates()) {
      <div class="filter-row">
        @if (showStatus()) {
          <div class="filter-item">
            <label class="filter-label" for="statusSelect">
              {{ translationService.translate("shared.filters.status") }}
            </label>
            <p-select
              [style]="{ width: '100%' }"
              inputId="statusSelect"
              [options]="statusOptions()"
              [placeholder]="translationService.translate('shared.filters.all')"
              [ngModel]="selectedStatus()"
              (ngModelChange)="selectedStatus.set($event)"
            ></p-select>
          </div>
        }

        @if (showDates()) {
          <div class="filter-item">
            <label class="filter-label" for="dateFrom">
              {{ translationService.translate("shared.filters.dateFrom") }}
            </label>
            <p-datepicker
              inputId="dateFrom"
              [ngModel]="selectedDate()"
              (ngModelChange)="selectedDate.set($event)"
              [placeholder]="
                translationService.translate('shared.filters.dateFrom')
              "
            ></p-datepicker>
          </div>

          <div class="filter-item">
            <label class="filter-label" for="dateTo">
              {{ translationService.translate("shared.filters.dateTo") }}
            </label>
            <p-datepicker
              inputId="dateTo"
              [ngModel]="selectedEndDate()"
              (ngModelChange)="selectedEndDate.set($event)"
              [placeholder]="
                translationService.translate('shared.filters.dateTo')
              "
            ></p-datepicker>
          </div>
        }
      </div>
    }

    @if (showSort() || showActions()) {
      @if (showSort()) {
        <div class="filter-item">
          <label class="filter-label" for="sortBy">
            {{ translationService.translate("shared.filters.sortBy") }}
          </label>
          <p-select
            [style]="{ width: '100%' }"
            inputId="sortBy"
            [options]="sortByOptions()"
            optionLabel="label"
            optionValue="value"
            [ngModel]="sortField()"
            (ngModelChange)="sortField.set($event)"
          ></p-select>
        </div>

        <div class="filter-item">
          <label class="filter-label" for="sortOrder">
            {{ translationService.translate("shared.filters.sortOrder") }}
          </label>
          <p-select
            [style]="{ width: '100%' }"
            inputId="sortOrder"
            [options]="sortOrderOptions()"
            optionLabel="label"
            optionValue="value"
            [ngModel]="sortOrder()"
            (ngModelChange)="sortOrder.set($event)"
          ></p-select>
        </div>
      }

      @if (showActions()) {
        <div class="filter-actions">
          <p-button
            icon="pi pi-filter-slash"
            [label]="translationService.translate('shared.filters.clear')"
            severity="secondary"
            [outlined]="true"
            size="small"
            (onClick)="clearFilters()"
          ></p-button>
          <p-button
            icon="pi pi-filter"
            [label]="translationService.translate('shared.filters.apply')"
            size="small"
            (onClick)="applyFilters()"
          ></p-button>
        </div>
      }
    }
  </div>
</p-drawer>
