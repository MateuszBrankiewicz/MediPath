@if (computedIsLoading()) {
  <div class="spinner-container">
    <p-progress-spinner [style]="{ width: '20%', height: '20%' }" />
  </div>
} @else {
  <div class="dashboard-content">
    <div class="top-content">
      <div class="prescriptions-content">
        <p-card class="prescriptions">
          <ng-template #header>
            <span class="header-span">{{
              translationService.translate("patient.dashboard.prescriptions")
            }}</span>
          </ng-template>
          <div class="items-content">
            @if (prescriptions().length === 0) {
              <div class="empty-state">
                <div class="empty-icon">ðŸ“‹</div>
                <p class="empty-message">
                  {{
                    translationService.translate(
                      "patient.dashboard.empty.prescriptionsMessage"
                    )
                  }}
                </p>
              </div>
            } @else {
              @for (refferal of prescriptions(); track refferal.id) {
                <div class="single-item">
                  <span class="name">{{ refferal.doctorName }}</span>
                  <span>{{ refferal.prescriptionPin }}</span>
                </div>
              }
            }
          </div>
          <ng-template #footer>
            <div class="footer">
              <p-button icon="pi pi-chevron-down" [text]="true" />
            </div>
          </ng-template>
        </p-card>
      </div>

      <p-card class="refferals">
        <ng-template #header>
          <span class="header-span">{{
            translationService.translate("patient.dashboard.referrals")
          }}</span>
        </ng-template>
        <div class="items-content">
          @if (refferals().length === 0) {
            <div class="empty-state">
              <div class="empty-icon">ðŸ©º</div>
              <p class="empty-message">
                {{
                  translationService.translate(
                    "patient.dashboard.empty.referralsMessage"
                  )
                }}
              </p>
            </div>
          } @else {
            @for (refferal of refferals(); track refferal.id) {
              <div class="single-item">
                <span class="name">{{ refferal.doctorName }}</span>
                <span>{{ refferal.prescriptionPin }}</span>
              </div>
            }
          }
        </div>

        <ng-template #footer>
          <div class="footer">
            <p-button icon="pi pi-chevron-down" [text]="true" />
          </div>
        </ng-template>
      </p-card>
    </div>
    <div class="visits-content">
      <span>
        <i class="pi pi-calendar"></i>
        {{
          translationService.translate("patient.dashboard.upcomingVisits")
        }}</span
      >

      <p-card
        [header]="
          translationService.translate('patient.dashboard.upcomingVisits')
        "
        class="upcoming-visits-card"
        class="visits-card"
      >
        @if (upcomingVisits().length === 0) {
          <div class="empty-state">
            <div class="empty-icon">ðŸ“…</div>
            <p class="empty-message">
              {{
                translationService.translate(
                  "patient.dashboard.empty.visitsMessage"
                )
              }}
            </p>
          </div>
        } @else {
          @for (visit of upcomingVisits(); track visit.id) {
            <div class="visit-item">
              <span class="visit-time">{{ visit.date }}</span>
              <span class="visit-doctor">{{ visit.doctorName }}</span>
              <p-button
                [label]="
                  translationService.translate('patient.dashboard.cancelVisit')
                "
                severity="danger"
                [outlined]="true"
                size="small"
                (onClick)="cancelVisit(visit.id)"
              />
            </div>
          }
        }
      </p-card>
    </div>
  </div>
}
