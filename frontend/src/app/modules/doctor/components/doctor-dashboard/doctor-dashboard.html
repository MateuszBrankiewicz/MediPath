<div class="dashboard-container">
  <div class="left-panel">
    <div class="welcome-section">
      <app-welcome-card [data]="welcomeCardData"></app-welcome-card>
    </div>

    <div class="middle-row">
      <div class="stats-card-container">
        <app-stats-card [data]="ratingCardData"></app-stats-card>
      </div>

      <div class="current-visit-container">
        <app-appointments-list
          [title]="
            translationService.translate('doctor.dashboard.currentVisit')
          "
          [currentAppointment]="currentVisit()"
          [showCurrentAppointment]="true"
          [showViewButton]="true"
          [viewButtonLabel]="
            translationService.translate('doctor.dashboard.view')
          "
          [patientLabel]="translationService.translate('doctor.dashboard.with')"
          [appointments]="[]"
          (viewAppointment)="onViewCurrentVisit()"
        ></app-appointments-list>
      </div>
    </div>

    <div class="appointments-section">
      <app-appointments-list
        [title]="
          translationService.translate('doctor.dashboard.todaysAppointments')
        "
        [appointments]="todaysAppointments()"
        [showCurrentAppointment]="false"
        (appointmentClick)="onAppointmentClick($event)"
      ></app-appointments-list>
    </div>
  </div>

  <div class="right-panel">
    <div class="patients-count">
      <div class="count-icon">
        <i class="pi pi-users"></i>
      </div>
      <div class="count-content">
        <span class="count-number">{{ todaysAppointments().length }}</span>
        <div class="count-label">
          {{
            translationService.translate("doctor.dashboard.patientsForToday")
          }}
        </div>
      </div>
    </div>

    <div class="calendar-section">
      <div class="calendar-header">
        <div class="calendar-title">
          <h3>
            {{ translationService.translate("shared.calendar.selectDate") }}
          </h3>
          <p-button
            [label]="translationService.translate('doctor.dashboard.today')"
            [text]="true"
            size="small"
            icon="pi pi-calendar"
            (onClick)="goToToday()"
          >
          </p-button>
        </div>
        <div class="calendar-nav">
          <p-button
            icon="pi pi-chevron-left"
            [text]="true"
            size="small"
            [rounded]="true"
            (onClick)="previousMonth()"
          >
          </p-button>
          <span class="month-year">{{ currentMonthDisplay }}</span>
          <p-button
            icon="pi pi-chevron-right"
            [text]="true"
            size="small"
            [rounded]="true"
            (onClick)="nextMonth()"
          >
          </p-button>
        </div>
      </div>

      <div class="calendar-grid">
        <!-- Day Labels Header -->
        <div class="calendar-header-days">
          @for (dayLabel of dayLabels(); track dayLabel) {
            <div class="day-label">
              {{ translationService.translate(dayLabel) }}
            </div>
          }
        </div>

        <!-- Calendar Days -->
        <div class="calendar-days">
          @for (day of calendarDays; track $index) {
            <div
              class="calendar-day"
              [class.current-month]="!day.isOtherMonth"
              [class.other-month]="day.isOtherMonth"
              [class.today]="day.isToday"
              [class.selected]="day.isSelected"
              [class.has-appointments]="day.hasAppointments"
              (click)="onCalendarDayClick(day)"
            >
              {{ day.date || "" }}
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
